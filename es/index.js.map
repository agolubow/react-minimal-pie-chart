{"version":3,"file":"index.js","sources":["../src/utils.js","../src/ReactMinimalPieChartPath.js","../src/propTypes.js","../src/ReactMinimalPieChartLabel.js","../src/ReactMinimalPieChart.js"],"sourcesContent":["const PI = Math.PI;\n\nexport function degreesToRadians(degrees) {\n  return (degrees * PI) / 180;\n}\n\nexport function evaluateViewBoxSize(ratio, baseSize) {\n  // Wide ratio\n  if (ratio > 1) {\n    return `0 0 ${baseSize} ${baseSize / ratio}`;\n  }\n  // Narrow/squared ratio\n  return `0 0 ${baseSize * ratio} ${baseSize}`;\n}\n\nexport function evaluateLabelTextAnchor({\n  labelPosition,\n  lineWidth,\n  labelHorizontalShift,\n} = {}) {\n  // Label in the vertical center\n  if (labelHorizontalShift === 0) {\n    return 'middle';\n  }\n  // Outward label\n  if (labelPosition > 100) {\n    return labelHorizontalShift > 0 ? 'start' : 'end';\n  }\n  // Inward label\n  const innerRadius = 100 - lineWidth;\n  if (labelPosition < innerRadius) {\n    return labelHorizontalShift > 0 ? 'end' : 'start';\n  }\n  // Overlying label\n  return 'middle';\n}\n\nexport function valueBetween(value, min, max) {\n  if (value > max) return max;\n  if (value < min) return min;\n  return value;\n}\n\nexport function extractPercentage(value, percentage) {\n  return (value * percentage) / 100;\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\n//import partialCircle from 'svg-partial-circle';\nimport { degreesToRadians, extractPercentage, valueBetween } from './utils';\n\nconst partialCircle = function(cx, cy, r, start, end){\n  const length = end - start;\n  if (length === 0) return [];\n  const fromX = r * Math.cos(start) + cx;\n  const fromY = r * Math.sin(start) + cy;\n  const toX = r * Math.cos(end) + cx;\n  const toY = r * Math.sin(end) + cy;\n  const large = Math.abs(length) <= Math.PI ? '0' : '1';\n  const sweep = length < 0 ? '0' : '1';\n  return [['M', fromX, fromY], ['A', r, r, 0, large, sweep, toX, toY]];\n};\n\nfunction makePathCommands(cx, cy, startAngle, lengthAngle, radius) {\n  const patchedLengthAngle = valueBetween(lengthAngle, -359.999, 359.999);\n\n  return partialCircle(\n    cx,\n    cy, // center X and Y\n    radius,\n    degreesToRadians(startAngle),\n    degreesToRadians(startAngle + patchedLengthAngle)\n  )\n    .map(command => command.join(' '))\n    .join(' ');\n}\n\nexport default function ReactMinimalPieChartPath({\n  cx,\n  cy,\n  startAngle,\n  lengthAngle,\n  radius,\n  lineWidth,\n  reveal,\n  title,\n  ...props\n}) {\n  const actualRadio = radius - lineWidth / 2;\n  const pathCommands = makePathCommands(\n    cx,\n    cy,\n    startAngle,\n    lengthAngle,\n    actualRadio\n  );\n  let strokeDasharray;\n  let strokeDashoffset;\n\n  // Animate/hide paths with \"stroke-dasharray\" + \"stroke-dashoffset\"\n  // https://css-tricks.com/svg-line-animation-works/\n  if (typeof reveal === 'number') {\n    strokeDasharray = degreesToRadians(actualRadio) * Math.abs(lengthAngle);\n    strokeDashoffset =\n      strokeDasharray + extractPercentage(strokeDasharray, reveal);\n  }\n\n  return (\n    <path\n      d={pathCommands}\n      strokeWidth={lineWidth}\n      strokeDasharray={strokeDasharray}\n      strokeDashoffset={strokeDashoffset}\n      {...props}\n    >\n      {title && <title>{title}</title>}\n    </path>\n  );\n}\n\nReactMinimalPieChartPath.displayName = 'ReactMinimalPieChartPath';\n\nReactMinimalPieChartPath.propTypes = {\n  cx: PropTypes.number.isRequired,\n  cy: PropTypes.number.isRequired,\n  startAngle: PropTypes.number,\n  lengthAngle: PropTypes.number,\n  radius: PropTypes.number,\n  lineWidth: PropTypes.number,\n  reveal: PropTypes.number,\n  title: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n};\n\nReactMinimalPieChartPath.defaultProps = {\n  startAngle: 0,\n  lengthAngle: 0,\n  lineWidth: 100,\n  radius: 100,\n};\n","import PropTypes from 'prop-types';\n\nexport const dataPropType = PropTypes.arrayOf(\n  PropTypes.shape({\n    title: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    value: PropTypes.number.isRequired,\n    key: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    color: PropTypes.string,\n  })\n);\n\nexport const stylePropType = PropTypes.objectOf(\n  PropTypes.oneOfType([PropTypes.number, PropTypes.string])\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { dataPropType } from './propTypes';\n\nexport default function ReactMinimalPieChartLabel({\n  data, // eslint-disable-line no-unused-vars\n  dataIndex, // eslint-disable-line no-unused-vars\n  color,\n  ...props\n}) {\n  return (\n    <text\n      textAnchor=\"middle\"\n      alignmentBaseline=\"middle\"\n      fill={color}\n      {...props}\n    />\n  );\n}\n\nReactMinimalPieChartLabel.displayName = 'ReactMinimalPieChartLabel';\n\nReactMinimalPieChartLabel.propTypes = {\n  data: dataPropType,\n  dataIndex: PropTypes.number,\n  color: PropTypes.string,\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Path from './ReactMinimalPieChartPath';\nimport DefaultLabel from './ReactMinimalPieChartLabel';\nimport { dataPropType, stylePropType } from './propTypes';\nimport {\n  degreesToRadians,\n  evaluateViewBoxSize,\n  evaluateLabelTextAnchor,\n  extractPercentage,\n  valueBetween,\n} from './utils';\n\nconst VIEWBOX_SIZE = 100;\nconst VIEWBOX_HALF_SIZE = VIEWBOX_SIZE / 2;\n\nfunction sumValues(data) {\n  return data.reduce((acc, dataEntry) => acc + dataEntry.value, 0);\n}\n\n// Append \"percentage\", \"degrees\" and \"startOffset\" into each data entry\nif(typeof Math.sign === 'undefined'){\n  Math.sign = function(x){ \n    return x > 0 ? 1 : x < 0 ? -1 : x;\n  }\n}\n\nfunction extendData({\n  data,\n  lengthAngle: totalAngle,\n  totalValue,\n  paddingAngle,\n}) {\n  const total = totalValue || sumValues(data);\n  const normalizedTotalAngle = valueBetween(totalAngle, -360, 360);\n  const numberOfPaddings =\n    Math.abs(normalizedTotalAngle) === 360 ? data.length : data.length - 1;\n  const degreesTakenByPadding =\n    Math.abs(paddingAngle) * numberOfPaddings * Math.sign(normalizedTotalAngle);\n  const singlePaddingDegrees = degreesTakenByPadding / numberOfPaddings;\n  const degreesTakenByPaths = normalizedTotalAngle - degreesTakenByPadding;\n  let lastSegmentEnd = 0;\n\n  return data.map(dataEntry => {\n    const valueInPercentage = (dataEntry.value / total) * 100;\n    const degrees = extractPercentage(degreesTakenByPaths, valueInPercentage);\n    const startOffset = lastSegmentEnd;\n    lastSegmentEnd = lastSegmentEnd + degrees + singlePaddingDegrees;\n\n    return {\n      percentage: valueInPercentage,\n      degrees,\n      startOffset,\n      ...dataEntry,\n    };\n  });\n}\n\nfunction makeSegmentTransitionStyle(duration, easing, furtherStyles = {}) {\n  // Merge CSS transition necessary for chart animation with the ones provided by \"segmentsStyle\"\n  const transition = [\n    `stroke-dashoffset ${duration}ms ${easing}`,\n    furtherStyles.transition,\n  ]\n    .filter(Boolean)\n    .join(',');\n\n  return {\n    transition,\n  };\n}\n\nfunction renderLabelItem(option, props, value) {\n  if (React.isValidElement(option)) {\n    return React.cloneElement(option, props);\n  }\n\n  let label = value;\n  if (typeof option === 'function') {\n    label = option(props);\n    if (React.isValidElement(label)) {\n      return label;\n    }\n  }\n\n  return <DefaultLabel {...props}>{label}</DefaultLabel>;\n}\n\nfunction renderLabels(data, props) {\n  const labelPosition = extractPercentage(props.radius, props.labelPosition);\n\n  return data.map((dataEntry, index) => {\n    const startAngle = props.startAngle + dataEntry.startOffset;\n    const halfAngle = startAngle + dataEntry.degrees / 2;\n    const halfAngleRadians = degreesToRadians(halfAngle);\n    const dx = Math.cos(halfAngleRadians) * labelPosition;\n    const dy = Math.sin(halfAngleRadians) * labelPosition;\n\n    // This object is passed as props to the \"label\" component\n    const labelProps = {\n      key: `label-${dataEntry.key || index}`,\n      x: props.cx,\n      y: props.cy,\n      dx,\n      dy,\n      textAnchor: evaluateLabelTextAnchor({\n        lineWidth: props.lineWidth,\n        labelPosition: props.labelPosition,\n        labelHorizontalShift: dx,\n      }),\n      data: data,\n      dataIndex: index,\n      color: dataEntry.color,\n      style: props.labelStyle,\n    };\n\n    return {label:props.label,props:labelProps,value:dataEntry.value};\n    });\n    for(var i=0;i<labels.length;i++){\n        var previousIndex = (i==0) ? (labels.length - 1) : (i-1);\n        while( Math.abs(Math.abs(labels[previousIndex].props.dy) - Math.abs(labels[i].props.dy)) < 4 ){\n          if(labels[previousIndex].props.dy > labels[i].props.dy){\n            labels[i].props.dy -= 0.15;\n          }else{\n            labels[i].props.dy += 0.15;\n          }\n        }\n    }\n    return labels.map(function(label){\n        return renderLabelItem(label.label, label.props, label.value);\n    });\n}\n\nfunction renderSegments(data, props, hide) {\n  let style = props.segmentsStyle;\n  let reveal;\n\n  if (props.animate) {\n    const transitionStyle = makeSegmentTransitionStyle(\n      props.animationDuration,\n      props.animationEasing,\n      style\n    );\n    style = Object.assign({}, style, transitionStyle);\n  }\n\n  // Hide/reveal the segment?\n  if (hide === true) {\n    reveal = 0;\n  } else if (typeof props.reveal === 'number') {\n    reveal = props.reveal;\n  } else if (hide === false) {\n    reveal = 100;\n  }\n\n  return data.map((dataEntry, index) => {\n    const startAngle = props.startAngle + dataEntry.startOffset;\n\n    return (\n      <Path\n        key={dataEntry.key || index}\n        cx={props.cx}\n        cy={props.cy}\n        startAngle={startAngle}\n        lengthAngle={dataEntry.degrees}\n        radius={props.radius}\n        lineWidth={extractPercentage(props.radius, props.lineWidth)}\n        reveal={reveal}\n        title={dataEntry.title}\n        style={style}\n        stroke={dataEntry.color}\n        strokeLinecap={props.rounded ? 'round' : undefined}\n        fill=\"none\"\n        onMouseOver={\n          props.onMouseOver && (e => props.onMouseOver(e, props.data, index))\n        }\n        onMouseOut={\n          props.onMouseOut && (e => props.onMouseOut(e, props.data, index))\n        }\n        onClick={props.onClick && (e => props.onClick(e, props.data, index))}\n      />\n    );\n  });\n}\n\nexport default class ReactMinimalPieChart extends Component {\n  constructor(props) {\n    super(props);\n\n    if (this.props.animate === true) {\n      this.hideSegments = true;\n    }\n  }\n\n  componentDidMount() {\n    if (this.props.animate === true && requestAnimationFrame) {\n      this.initialAnimationTimerId = setTimeout(() => {\n        this.initialAnimationTimerId = null;\n        this.initialAnimationRAFId = requestAnimationFrame(() => {\n          (this.initialAnimationRAFId = null), this.startAnimation();\n        });\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.initialAnimationTimerId) {\n      clearTimeout(this.initialAnimationTimerId);\n    }\n    if (this.initialAnimationRAFId) {\n      cancelAnimationFrame(this.initialAnimationRAFId);\n    }\n  }\n\n  startAnimation() {\n    this.hideSegments = false;\n    this.forceUpdate();\n  }\n\n  render() {\n    if (this.props.data === undefined) {\n      return null;\n    }\n    const extendedData = extendData(this.props);\n\n    return (\n      <div\n        className={this.props.className}\n        style={this.props.style}\n      >\n        <svg\n          viewBox={evaluateViewBoxSize(this.props.ratio, VIEWBOX_SIZE)}\n          width=\"100%\"\n          height=\"100%\"\n          style={{ display: 'block' }}\n        >\n          {renderSegments(extendedData, this.props, this.hideSegments)}\n          {this.props.label && renderLabels(extendedData, this.props)}\n          {this.props.injectSvg && this.props.injectSvg()}\n        </svg>\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nReactMinimalPieChart.displayName = 'ReactMinimalPieChart';\n\nReactMinimalPieChart.propTypes = {\n  data: dataPropType,\n  cx: PropTypes.number,\n  cy: PropTypes.number,\n  ratio: PropTypes.number,\n  totalValue: PropTypes.number,\n  className: PropTypes.string,\n  style: stylePropType,\n  segmentsStyle: stylePropType,\n  startAngle: PropTypes.number,\n  lengthAngle: PropTypes.number,\n  paddingAngle: PropTypes.number,\n  lineWidth: PropTypes.number,\n  radius: PropTypes.number,\n  rounded: PropTypes.bool,\n  animate: PropTypes.bool,\n  animationDuration: PropTypes.number,\n  animationEasing: PropTypes.string,\n  reveal: PropTypes.number,\n  children: PropTypes.node,\n  injectSvg: PropTypes.func,\n  label: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.element,\n    PropTypes.bool,\n  ]),\n  labelPosition: PropTypes.number,\n  labelStyle: stylePropType,\n  onMouseOver: PropTypes.func,\n  onMouseOut: PropTypes.func,\n  onClick: PropTypes.func,\n};\n\nReactMinimalPieChart.defaultProps = {\n  cx: VIEWBOX_HALF_SIZE,\n  cy: VIEWBOX_HALF_SIZE,\n  ratio: 1,\n  startAngle: 0,\n  lengthAngle: 360,\n  paddingAngle: 0,\n  lineWidth: 100,\n  radius: VIEWBOX_HALF_SIZE,\n  rounded: false,\n  animate: false,\n  animationDuration: 500,\n  animationEasing: 'ease-out',\n  label: false,\n  labelPosition: 50,\n  onMouseOver: undefined,\n  onMouseOut: undefined,\n  onClick: undefined,\n};\n"],"names":["PI","Math","degreesToRadians","degrees","evaluateViewBoxSize","ratio","baseSize","evaluateLabelTextAnchor","labelPosition","lineWidth","labelHorizontalShift","innerRadius","valueBetween","value","min","max","extractPercentage","percentage","partialCircle","cx","cy","r","start","end","length","fromX","cos","fromY","sin","toX","toY","large","abs","sweep","makePathCommands","startAngle","lengthAngle","radius","patchedLengthAngle","map","command","join","ReactMinimalPieChartPath","reveal","title","props","actualRadio","pathCommands","strokeDasharray","strokeDashoffset","displayName","propTypes","PropTypes","number","isRequired","oneOfType","string","defaultProps","dataPropType","arrayOf","shape","key","color","stylePropType","objectOf","ReactMinimalPieChartLabel","data","dataIndex","VIEWBOX_SIZE","VIEWBOX_HALF_SIZE","sumValues","reduce","acc","dataEntry","sign","x","extendData","totalAngle","totalValue","paddingAngle","total","normalizedTotalAngle","numberOfPaddings","degreesTakenByPadding","singlePaddingDegrees","degreesTakenByPaths","lastSegmentEnd","valueInPercentage","startOffset","makeSegmentTransitionStyle","duration","easing","furtherStyles","transition","filter","Boolean","renderLabelItem","option","React","isValidElement","cloneElement","label","DefaultLabel","renderLabels","index","halfAngle","halfAngleRadians","dx","dy","labelProps","y","textAnchor","style","labelStyle","i","labels","previousIndex","renderSegments","hide","segmentsStyle","animate","transitionStyle","animationDuration","animationEasing","Object","assign","Path","rounded","undefined","onMouseOver","e","onMouseOut","onClick","ReactMinimalPieChart","hideSegments","componentDidMount","requestAnimationFrame","initialAnimationTimerId","setTimeout","initialAnimationRAFId","startAnimation","componentWillUnmount","clearTimeout","cancelAnimationFrame","forceUpdate","render","extendedData","className","display","injectSvg","children","Component","bool","node","func","element"],"mappings":"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"}